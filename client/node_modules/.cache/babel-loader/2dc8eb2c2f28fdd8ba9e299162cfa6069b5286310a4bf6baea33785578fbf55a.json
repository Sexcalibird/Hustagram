{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"../axios/axios\";\nconst initialState = {\n  token: null,\n  error: null\n};\nexport const signIn = createAsyncThunk('auth/signIn', async (_ref, _ref2) => {\n  let {\n    email,\n    pwd\n  } = _ref;\n  let {\n    rejectWithValue\n  } = _ref2;\n  try {\n    const response = await axios.post('/auth', {\n      email,\n      pwd\n    });\n    return response.data.accessToken;\n  } catch (err) {\n    var _err$response, _err$response2;\n    if (!(err !== null && err !== void 0 && err.response)) {\n      return rejectWithValue('No Server Response');\n    } else if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 400) {\n      return rejectWithValue('Missing Email or Password');\n    } else if (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 401) {\n      return rejectWithValue('Unauthorized');\n    } else {\n      return rejectWithValue('Login Failed');\n    }\n  }\n});\nconst authSlice = createSlice({\n  name: 'auth',\n  initialState,\n  reducers: {},\n  extraReducers(builder) {\n    builder.addCase(signIn.fulfilled, (state, action) => {\n      state.token = action.payload;\n      state.error = null;\n    }).addCase(signIn.rejected, (state, action) => {\n      state.error = action.payload;\n    });\n  }\n});\nexport const getAuth = state => state.auth.token;\nexport const getError = state => state.auth.error;\nexport default authSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","initialState","token","error","signIn","email","pwd","rejectWithValue","response","post","data","accessToken","err","status","authSlice","name","reducers","extraReducers","builder","addCase","fulfilled","state","action","payload","rejected","getAuth","auth","getError","reducer"],"sources":["C:/Users/ADMIN/IdeaProjects/datn/client/src/redux/authSlice.js"],"sourcesContent":["import {createSlice, createAsyncThunk} from \"@reduxjs/toolkit\";\r\nimport axios from \"../axios/axios\";\r\n\r\nconst initialState = {\r\n    token: null,\r\n    error : null\r\n}\r\n\r\nexport const signIn = createAsyncThunk('auth/signIn',async ({email, pwd}, {rejectWithValue}) => {\r\n    try {\r\n        const response = await axios.post('/auth', {email, pwd})\r\n        return response.data.accessToken\r\n    } catch (err) {\r\n        if (!err?.response) {\r\n            return rejectWithValue('No Server Response');\r\n        } else if (err.response?.status === 400) {\r\n            return rejectWithValue('Missing Email or Password');\r\n        } else if (err.response?.status === 401) {\r\n            return rejectWithValue('Unauthorized')\r\n        } else {\r\n            return rejectWithValue('Login Failed')\r\n        }\r\n    }\r\n})\r\n\r\nconst authSlice = createSlice({\r\n    name: 'auth',\r\n    initialState,\r\n    reducers: {},\r\n    extraReducers(builder){\r\n        builder\r\n            .addCase(signIn.fulfilled,(state,action) => {\r\n                state.token = action.payload\r\n                state.error = null\r\n            })\r\n            .addCase(signIn.rejected, (state, action) => {\r\n                state.error = action.payload\r\n            })\r\n    }\r\n})\r\n\r\nexport const getAuth = (state) => state.auth.token\r\nexport const getError = (state) => state.auth.error\r\nexport default authSlice.reducer"],"mappings":"AAAA,SAAQA,WAAW,EAAEC,gBAAgB,QAAO,kBAAkB;AAC9D,OAAOC,KAAK,MAAM,gBAAgB;AAElC,MAAMC,YAAY,GAAG;EACjBC,KAAK,EAAE,IAAI;EACXC,KAAK,EAAG;AACZ,CAAC;AAED,OAAO,MAAMC,MAAM,GAAGL,gBAAgB,CAAC,aAAa,EAAC,uBAA2C;EAAA,IAApC;IAACM,KAAK;IAAEC;EAAG,CAAC;EAAA,IAAE;IAACC;EAAe,CAAC;EACvF,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMR,KAAK,CAACS,IAAI,CAAC,OAAO,EAAE;MAACJ,KAAK;MAAEC;IAAG,CAAC,CAAC;IACxD,OAAOE,QAAQ,CAACE,IAAI,CAACC,WAAW;EACpC,CAAC,CAAC,OAAOC,GAAG,EAAE;IAAA;IACV,IAAI,EAACA,GAAG,aAAHA,GAAG,eAAHA,GAAG,CAAEJ,QAAQ,GAAE;MAChB,OAAOD,eAAe,CAAC,oBAAoB,CAAC;IAChD,CAAC,MAAM,IAAI,kBAAAK,GAAG,CAACJ,QAAQ,kDAAZ,cAAcK,MAAM,MAAK,GAAG,EAAE;MACrC,OAAON,eAAe,CAAC,2BAA2B,CAAC;IACvD,CAAC,MAAM,IAAI,mBAAAK,GAAG,CAACJ,QAAQ,mDAAZ,eAAcK,MAAM,MAAK,GAAG,EAAE;MACrC,OAAON,eAAe,CAAC,cAAc,CAAC;IAC1C,CAAC,MAAM;MACH,OAAOA,eAAe,CAAC,cAAc,CAAC;IAC1C;EACJ;AACJ,CAAC,CAAC;AAEF,MAAMO,SAAS,GAAGhB,WAAW,CAAC;EAC1BiB,IAAI,EAAE,MAAM;EACZd,YAAY;EACZe,QAAQ,EAAE,CAAC,CAAC;EACZC,aAAa,CAACC,OAAO,EAAC;IAClBA,OAAO,CACFC,OAAO,CAACf,MAAM,CAACgB,SAAS,EAAC,CAACC,KAAK,EAACC,MAAM,KAAK;MACxCD,KAAK,CAACnB,KAAK,GAAGoB,MAAM,CAACC,OAAO;MAC5BF,KAAK,CAAClB,KAAK,GAAG,IAAI;IACtB,CAAC,CAAC,CACDgB,OAAO,CAACf,MAAM,CAACoB,QAAQ,EAAE,CAACH,KAAK,EAAEC,MAAM,KAAK;MACzCD,KAAK,CAAClB,KAAK,GAAGmB,MAAM,CAACC,OAAO;IAChC,CAAC,CAAC;EACV;AACJ,CAAC,CAAC;AAEF,OAAO,MAAME,OAAO,GAAIJ,KAAK,IAAKA,KAAK,CAACK,IAAI,CAACxB,KAAK;AAClD,OAAO,MAAMyB,QAAQ,GAAIN,KAAK,IAAKA,KAAK,CAACK,IAAI,CAACvB,KAAK;AACnD,eAAeW,SAAS,CAACc,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}