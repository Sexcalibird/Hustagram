{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\IdeaProjects\\\\datn\\\\client\\\\src\\\\components\\\\functions\\\\AddCmt.js\",\n  _s = $RefreshSig$();\nimport { addCmt } from \"../../redux/postsSlice\";\nimport { useDispatch } from \"react-redux\";\nimport { newNotification } from \"../../redux/notificationSlice\";\nimport { useContext } from \"react\";\nimport CreateContext from \"../../context/ContextProvider\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddCmt = _ref => {\n  _s();\n  let {\n    post,\n    auth,\n    cmt,\n    setCmt,\n    setJustCmt\n  } = _ref;\n  const dispatch = useDispatch();\n  const {\n    socket\n  } = useContext(CreateContext);\n  const handleCmt = () => {\n    dispatch(addCmt({\n      id: post === null || post === void 0 ? void 0 : post._id,\n      author: auth._id,\n      cmt: cmt\n    })).unwrap().then(() => {\n      if (setJustCmt) {\n        setJustCmt(cmt);\n      }\n      setCmt('');\n    }).catch(err => {\n      return err;\n    });\n    if (post.userId !== auth._id) {\n      dispatch(newNotification({\n        id: post.userId,\n        postId: post._id,\n        userId: auth._id,\n        text: \"commented on your post\"\n      }));\n      socket.emit(\"sendNotification\", {\n        receiverId: post.userId,\n        postId: post._id,\n        userId: auth._id,\n        avatar: auth.avatar,\n        username: auth.username,\n        text: \"commented on your post\",\n        date: new Date()\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"cmt-disabled\",\n    onClick: handleCmt,\n    disabled: !cmt,\n    children: \"Post\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n};\n_s(AddCmt, \"HWvpt4vlDljoixZn1/Oz5ZBP6yw=\", false, function () {\n  return [useDispatch];\n});\n_c = AddCmt;\nexport default AddCmt;\nvar _c;\n$RefreshReg$(_c, \"AddCmt\");","map":{"version":3,"names":["addCmt","useDispatch","newNotification","useContext","CreateContext","AddCmt","post","auth","cmt","setCmt","setJustCmt","dispatch","socket","handleCmt","id","_id","author","unwrap","then","catch","err","userId","postId","text","emit","receiverId","avatar","username","date","Date"],"sources":["C:/Users/ADMIN/IdeaProjects/datn/client/src/components/functions/AddCmt.js"],"sourcesContent":["import {addCmt} from \"../../redux/postsSlice\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {newNotification} from \"../../redux/notificationSlice\";\r\nimport {useContext} from \"react\";\r\nimport CreateContext from \"../../context/ContextProvider\";\r\n\r\nconst AddCmt = ({post, auth, cmt, setCmt, setJustCmt}) => {\r\n\r\n    const dispatch = useDispatch()\r\n    const {socket} = useContext(CreateContext)\r\n\r\n    const handleCmt = () => {\r\n        dispatch(addCmt({id: post?._id, author: auth._id, cmt: cmt}))\r\n            .unwrap()\r\n            .then(() => {\r\n                if (setJustCmt) {setJustCmt(cmt)}\r\n                setCmt('')\r\n            })\r\n            .catch(err => {\r\n                return err\r\n            })\r\n        if (post.userId !== auth._id) {\r\n            dispatch(newNotification({\r\n                id: post.userId,\r\n                postId: post._id,\r\n                userId: auth._id,\r\n                text: \"commented on your post\"\r\n            }))\r\n            socket.emit(\"sendNotification\", {\r\n                receiverId: post.userId,\r\n                postId: post._id,\r\n                userId: auth._id,\r\n                avatar: auth.avatar,\r\n                username: auth.username,\r\n                text: \"commented on your post\",\r\n                date: new Date(),\r\n            });\r\n        }\r\n    }\r\n\r\n    return (\r\n        <button\r\n            className=\"cmt-disabled\"\r\n            onClick={handleCmt}\r\n            disabled={!cmt}\r\n        >\r\n            Post\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default AddCmt"],"mappings":";;AAAA,SAAQA,MAAM,QAAO,wBAAwB;AAC7C,SAAQC,WAAW,QAAO,aAAa;AACvC,SAAQC,eAAe,QAAO,+BAA+B;AAC7D,SAAQC,UAAU,QAAO,OAAO;AAChC,OAAOC,aAAa,MAAM,+BAA+B;AAAC;AAE1D,MAAMC,MAAM,GAAG,QAA2C;EAAA;EAAA,IAA1C;IAACC,IAAI;IAAEC,IAAI;IAAEC,GAAG;IAAEC,MAAM;IAAEC;EAAU,CAAC;EAEjD,MAAMC,QAAQ,GAAGV,WAAW,EAAE;EAC9B,MAAM;IAACW;EAAM,CAAC,GAAGT,UAAU,CAACC,aAAa,CAAC;EAE1C,MAAMS,SAAS,GAAG,MAAM;IACpBF,QAAQ,CAACX,MAAM,CAAC;MAACc,EAAE,EAAER,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAES,GAAG;MAAEC,MAAM,EAAET,IAAI,CAACQ,GAAG;MAAEP,GAAG,EAAEA;IAAG,CAAC,CAAC,CAAC,CACxDS,MAAM,EAAE,CACRC,IAAI,CAAC,MAAM;MACR,IAAIR,UAAU,EAAE;QAACA,UAAU,CAACF,GAAG,CAAC;MAAA;MAChCC,MAAM,CAAC,EAAE,CAAC;IACd,CAAC,CAAC,CACDU,KAAK,CAACC,GAAG,IAAI;MACV,OAAOA,GAAG;IACd,CAAC,CAAC;IACN,IAAId,IAAI,CAACe,MAAM,KAAKd,IAAI,CAACQ,GAAG,EAAE;MAC1BJ,QAAQ,CAACT,eAAe,CAAC;QACrBY,EAAE,EAAER,IAAI,CAACe,MAAM;QACfC,MAAM,EAAEhB,IAAI,CAACS,GAAG;QAChBM,MAAM,EAAEd,IAAI,CAACQ,GAAG;QAChBQ,IAAI,EAAE;MACV,CAAC,CAAC,CAAC;MACHX,MAAM,CAACY,IAAI,CAAC,kBAAkB,EAAE;QAC5BC,UAAU,EAAEnB,IAAI,CAACe,MAAM;QACvBC,MAAM,EAAEhB,IAAI,CAACS,GAAG;QAChBM,MAAM,EAAEd,IAAI,CAACQ,GAAG;QAChBW,MAAM,EAAEnB,IAAI,CAACmB,MAAM;QACnBC,QAAQ,EAAEpB,IAAI,CAACoB,QAAQ;QACvBJ,IAAI,EAAE,wBAAwB;QAC9BK,IAAI,EAAE,IAAIC,IAAI;MAClB,CAAC,CAAC;IACN;EACJ,CAAC;EAED,oBACI;IACI,SAAS,EAAC,cAAc;IACxB,OAAO,EAAEhB,SAAU;IACnB,QAAQ,EAAE,CAACL,GAAI;IAAA;EAAA;IAAA;IAAA;IAAA;EAAA,QAGV;AAEjB,CAAC;AAAA,GA3CKH,MAAM;EAAA,QAESJ,WAAW;AAAA;AAAA,KAF1BI,MAAM;AA6CZ,eAAeA,MAAM;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}