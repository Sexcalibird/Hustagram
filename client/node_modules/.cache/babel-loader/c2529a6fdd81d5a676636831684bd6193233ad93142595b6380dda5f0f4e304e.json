{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\IdeaProjects\\\\datn\\\\client\\\\src\\\\components\\\\functions\\\\Like.js\",\n  _s = $RefreshSig$();\nimport { likePost } from \"../../redux/postsSlice\";\nimport { Favorite, FavoriteBorder } from \"@mui/icons-material\";\nimport { useDispatch } from \"react-redux\";\nimport { newNotification } from \"../../redux/notificationSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Like = _ref => {\n  _s();\n  var _post$likes;\n  let {\n    post,\n    auth,\n    likes,\n    setLikes\n  } = _ref;\n  const dispatch = useDispatch();\n  const hasLikedPost = post === null || post === void 0 ? void 0 : (_post$likes = post.likes) === null || _post$likes === void 0 ? void 0 : _post$likes.find(like => like === auth._id);\n  const handleLike = () => {\n    dispatch(likePost({\n      id: post._id,\n      userId: auth._id\n    })).unwrap().then().catch(err => {\n      return err.message;\n    });\n    if (hasLikedPost) {\n      setLikes(post.likes.filter(id => id !== auth._id));\n    } else {\n      setLikes([...post.likes, auth._id]);\n      if (post.userId !== auth._id) {\n        dispatch(newNotification({\n          id: post.userId,\n          postId: post._id,\n          userId: auth._id,\n          text: \"liked your post\"\n        }));\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: handleLike,\n    children: likes !== null && likes !== void 0 && likes.find(like => like === auth._id) ? /*#__PURE__*/_jsxDEV(Favorite, {\n      fontSize: \"large\",\n      sx: {\n        color: \"#f73378\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 19\n    }, this) : /*#__PURE__*/_jsxDEV(FavoriteBorder, {\n      fontSize: \"large\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 19\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 9\n  }, this);\n};\n_s(Like, \"rgTLoBID190wEKCp9+G8W6F7A5M=\", false, function () {\n  return [useDispatch];\n});\n_c = Like;\nexport default Like;\nvar _c;\n$RefreshReg$(_c, \"Like\");","map":{"version":3,"names":["likePost","Favorite","FavoriteBorder","useDispatch","newNotification","Like","post","auth","likes","setLikes","dispatch","hasLikedPost","find","like","_id","handleLike","id","userId","unwrap","then","catch","err","message","filter","postId","text","color"],"sources":["C:/Users/ADMIN/IdeaProjects/datn/client/src/components/functions/Like.js"],"sourcesContent":["import {likePost} from \"../../redux/postsSlice\";\r\nimport {Favorite, FavoriteBorder} from \"@mui/icons-material\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {newNotification} from \"../../redux/notificationSlice\";\r\n\r\nconst Like = ({post, auth, likes, setLikes}) => {\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const hasLikedPost = post?.likes?.find((like) => like === auth._id)\r\n\r\n    const handleLike = () => {\r\n        dispatch(likePost({id: post._id, userId: auth._id}))\r\n            .unwrap()\r\n            .then()\r\n            .catch(err => {\r\n                return err.message\r\n            })\r\n        if (hasLikedPost) {\r\n            setLikes(post.likes.filter((id) => id !== auth._id));\r\n        } else {\r\n            setLikes([...post.likes, auth._id]);\r\n            if (post.userId !== auth._id) {\r\n                dispatch(newNotification({\r\n                    id: post.userId,\r\n                    postId: post._id,\r\n                    userId: auth._id,\r\n                    text: \"liked your post\"\r\n                }))\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <button onClick={handleLike}>\r\n            {likes?.find((like) => like === auth._id)\r\n                ? <Favorite fontSize=\"large\" sx={{ color: \"#f73378\" }}/>\r\n                : <FavoriteBorder fontSize=\"large\"/>\r\n            }\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default Like"],"mappings":";;AAAA,SAAQA,QAAQ,QAAO,wBAAwB;AAC/C,SAAQC,QAAQ,EAAEC,cAAc,QAAO,qBAAqB;AAC5D,SAAQC,WAAW,QAAO,aAAa;AACvC,SAAQC,eAAe,QAAO,+BAA+B;AAAC;AAE9D,MAAMC,IAAI,GAAG,QAAmC;EAAA;EAAA;EAAA,IAAlC;IAACC,IAAI;IAAEC,IAAI;IAAEC,KAAK;IAAEC;EAAQ,CAAC;EAEvC,MAAMC,QAAQ,GAAGP,WAAW,EAAE;EAE9B,MAAMQ,YAAY,GAAGL,IAAI,aAAJA,IAAI,sCAAJA,IAAI,CAAEE,KAAK,gDAAX,YAAaI,IAAI,CAAEC,IAAI,IAAKA,IAAI,KAAKN,IAAI,CAACO,GAAG,CAAC;EAEnE,MAAMC,UAAU,GAAG,MAAM;IACrBL,QAAQ,CAACV,QAAQ,CAAC;MAACgB,EAAE,EAAEV,IAAI,CAACQ,GAAG;MAAEG,MAAM,EAAEV,IAAI,CAACO;IAAG,CAAC,CAAC,CAAC,CAC/CI,MAAM,EAAE,CACRC,IAAI,EAAE,CACNC,KAAK,CAACC,GAAG,IAAI;MACV,OAAOA,GAAG,CAACC,OAAO;IACtB,CAAC,CAAC;IACN,IAAIX,YAAY,EAAE;MACdF,QAAQ,CAACH,IAAI,CAACE,KAAK,CAACe,MAAM,CAAEP,EAAE,IAAKA,EAAE,KAAKT,IAAI,CAACO,GAAG,CAAC,CAAC;IACxD,CAAC,MAAM;MACHL,QAAQ,CAAC,CAAC,GAAGH,IAAI,CAACE,KAAK,EAAED,IAAI,CAACO,GAAG,CAAC,CAAC;MACnC,IAAIR,IAAI,CAACW,MAAM,KAAKV,IAAI,CAACO,GAAG,EAAE;QAC1BJ,QAAQ,CAACN,eAAe,CAAC;UACrBY,EAAE,EAAEV,IAAI,CAACW,MAAM;UACfO,MAAM,EAAElB,IAAI,CAACQ,GAAG;UAChBG,MAAM,EAAEV,IAAI,CAACO,GAAG;UAChBW,IAAI,EAAE;QACV,CAAC,CAAC,CAAC;MACP;IACJ;EACJ,CAAC;EAED,oBACI;IAAQ,OAAO,EAAEV,UAAW;IAAA,UACvBP,KAAK,aAALA,KAAK,eAALA,KAAK,CAAEI,IAAI,CAAEC,IAAI,IAAKA,IAAI,KAAKN,IAAI,CAACO,GAAG,CAAC,gBACnC,QAAC,QAAQ;MAAC,QAAQ,EAAC,OAAO;MAAC,EAAE,EAAE;QAAEY,KAAK,EAAE;MAAU;IAAE;MAAA;MAAA;MAAA;IAAA,QAAE,gBACtD,QAAC,cAAc;MAAC,QAAQ,EAAC;IAAO;MAAA;MAAA;MAAA;IAAA;EAAE;IAAA;IAAA;IAAA;EAAA,QAEnC;AAEjB,CAAC;AAAA,GApCKrB,IAAI;EAAA,QAEWF,WAAW;AAAA;AAAA,KAF1BE,IAAI;AAsCV,eAAeA,IAAI;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}