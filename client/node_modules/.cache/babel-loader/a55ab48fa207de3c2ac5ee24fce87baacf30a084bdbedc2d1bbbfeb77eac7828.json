{"ast":null,"code":"import axios from 'axios';\nconst BASE_URL = 'http://localhost:8080';\nexport default axios.create({\n  baseURL: BASE_URL\n});\nexport const axiosPrivate = axios.create({\n  baseURL: BASE_URL,\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  withCredentials: true\n});\naxiosPrivate.interceptors.request.use(config => {\n  if (!config.headers['Authorization']) {\n    config.headers['Authorization'] = `Bearer ${auth}`;\n  }\n  return config;\n}, error => Promise.reject(error));\naxiosPrivate.interceptors.response.use(response => response, async error => {\n  var _error$response;\n  const prevRequest = error === null || error === void 0 ? void 0 : error.config;\n  if ((error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 403 && !(prevRequest !== null && prevRequest !== void 0 && prevRequest.sent)) {\n    prevRequest.sent = true;\n    const newAccessToken = await refresh();\n    prevRequest.headers['Authorization'] = `Bearer ${newAccessToken}`;\n    return axiosPrivate(prevRequest);\n  }\n  return Promise.reject(error);\n});","map":{"version":3,"names":["axios","BASE_URL","create","baseURL","axiosPrivate","headers","withCredentials","interceptors","request","use","config","auth","error","Promise","reject","response","prevRequest","status","sent","newAccessToken","refresh"],"sources":["C:/Users/ADMIN/IdeaProjects/datn/client/src/axios/axios.js"],"sourcesContent":["import axios from 'axios';\r\nconst BASE_URL = 'http://localhost:8080';\r\n\r\nexport default axios.create({\r\n    baseURL: BASE_URL,\r\n});\r\n\r\nexport const axiosPrivate = axios.create({\r\n    baseURL: BASE_URL,\r\n    headers: { 'Content-Type': 'application/json' },\r\n    withCredentials: true\r\n});\r\naxiosPrivate.interceptors.request.use(\r\n    config => {\r\n        if (!config.headers['Authorization']) {\r\n            config.headers['Authorization'] = `Bearer ${auth}`;\r\n        }\r\n        return config;\r\n    }, (error) => Promise.reject(error)\r\n);\r\naxiosPrivate.interceptors.response.use(\r\n    response => response,\r\n    async (error) => {\r\n        const prevRequest = error?.config;\r\n        if (error?.response?.status === 403 && !prevRequest?.sent) {\r\n            prevRequest.sent = true;\r\n            const newAccessToken = await refresh();\r\n            prevRequest.headers['Authorization'] = `Bearer ${newAccessToken}`;\r\n            return axiosPrivate(prevRequest);\r\n        }\r\n        return Promise.reject(error);\r\n    }\r\n);"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,MAAMC,QAAQ,GAAG,uBAAuB;AAExC,eAAeD,KAAK,CAACE,MAAM,CAAC;EACxBC,OAAO,EAAEF;AACb,CAAC,CAAC;AAEF,OAAO,MAAMG,YAAY,GAAGJ,KAAK,CAACE,MAAM,CAAC;EACrCC,OAAO,EAAEF,QAAQ;EACjBI,OAAO,EAAE;IAAE,cAAc,EAAE;EAAmB,CAAC;EAC/CC,eAAe,EAAE;AACrB,CAAC,CAAC;AACFF,YAAY,CAACG,YAAY,CAACC,OAAO,CAACC,GAAG,CACjCC,MAAM,IAAI;EACN,IAAI,CAACA,MAAM,CAACL,OAAO,CAAC,eAAe,CAAC,EAAE;IAClCK,MAAM,CAACL,OAAO,CAAC,eAAe,CAAC,GAAI,UAASM,IAAK,EAAC;EACtD;EACA,OAAOD,MAAM;AACjB,CAAC,EAAGE,KAAK,IAAKC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CACtC;AACDR,YAAY,CAACG,YAAY,CAACQ,QAAQ,CAACN,GAAG,CAClCM,QAAQ,IAAIA,QAAQ,EACpB,MAAOH,KAAK,IAAK;EAAA;EACb,MAAMI,WAAW,GAAGJ,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEF,MAAM;EACjC,IAAI,CAAAE,KAAK,aAALA,KAAK,0CAALA,KAAK,CAAEG,QAAQ,oDAAf,gBAAiBE,MAAM,MAAK,GAAG,IAAI,EAACD,WAAW,aAAXA,WAAW,eAAXA,WAAW,CAAEE,IAAI,GAAE;IACvDF,WAAW,CAACE,IAAI,GAAG,IAAI;IACvB,MAAMC,cAAc,GAAG,MAAMC,OAAO,EAAE;IACtCJ,WAAW,CAACX,OAAO,CAAC,eAAe,CAAC,GAAI,UAASc,cAAe,EAAC;IACjE,OAAOf,YAAY,CAACY,WAAW,CAAC;EACpC;EACA,OAAOH,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAChC,CAAC,CACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}